# 프로세스 관리

OS상에서는 수십, 수백, 수천 개의 프로세스를 가동할 수 있다. 이에 비해 물리 서버의 CPU 코어 수는 많아야 수십 개 정도밖에 안 된다. 언제, 어떤 프로세스가 어느 정도의 CPU 코어를 이용할 수 있는지, 
처리 우선순위를 어떻게 결정할 것인지 관리 해야한다.

### OS가 프로그램을 실행하는 구조 

컴퓨터에 설치된 프로그램은 하드디스크에 저장되어 있다. OS가 프로그램을 실행하면 메모리에 해당 프로그램을 할당한다.
메모리에 할당된 프로그램을 '프로세스'라고 한다. 프로세스는 우선순위가 높은 처리에 의해 중단되기도 하는데 이를 '인터럽트'라 한다.

- 프로세스 : 메모리 상에 할당 된 프로그램
- 프로세스의 상태 : 실행 상태, 실행 가능 상태, 대기 상태
- 인터럽트 : 프로세스가 우선순위가 높은 처리에 의해 중단 되는 경우

### 멀티태스킹

OS는 여러 개의 태스크를 동시에 처리하는 능력을 갖고 있는데, 이를 '멀티캐스킹'이라고 한다. 
우리가 파일을 다운받으면서 글을 작성할 수 있는 것도 OS의 멀티태스킹 덕분이다.

'동시에 처리' 라는 것은 실제로 OS가 CPU에게 태스크를 순서대로 할당하는 것이다.
이 순서의 전환이 매우 빠르게 이루어져 '동시'에 움직이고 있는 것처럼 보인다.
이러한 순서를 정하는 것을 '스케줄링' 이라고 한다.

- 태스크 : OS가 CPU에게 의뢰하는 작업
- 시분할 처리 시스템 : 여러 사용자가 한 대의 고성능 컴퓨터를 공유하여 사용할 때 CPU의 사용자에게 순서대로 단시간 할당하는 시스템

### OS의 처리 성능

- 스루풋 : OS의 단위 시간당 처리 능력
- 스풀 : CPU로부터 입출력 장치로 가는 명령을 메모리와 같이 비교적 고속인 기억 장치에 일시적으로 저장하는 것. 프린터는 CPU와 비교해서 처리 속도가 느리므로 스풀을 사용하여 CPU의 처리와 입출력 동작의 처리의 차이를 완화 시킬 수 있다.

### 인터럽트
- 실행 중인 프로그램을 중단하고 우선순위가 높은 다른 프로그램에게 CPU를 할당하는 것
- 내부 인터럽트 : 실행 중인 프로그램이 원인이 되어 일어나는 인터럽트
- 외부 인터럽트 : 주변기기의 입출력 동작이나 하드웨어 고장, 오작동으로 인해 일어나는 인터럽트


### 프로세스
- 사용자가 프로그램을 실행하면 OS는 그 내용을 메모리상으로 읽어들여 처리한다. 메모리 상에 할당된 프로그램을 '프로세스'라 한다.
- 멀티태스킹: OS 관리하에서 여러 개의 프로세스가 병행하여 작동하는 것. 태스크를 순서대로 CPU에 할당하고 있기 때문에 여러 개의 태스크가 동시에 작동하고 있는 것처럼 보인다.
- 시분할 처리 시스템 : 여러 사용자가 한 대의 고성능 컴퓨터를 공유하여 사용할 때 CPU의 사용 권한을 사용자에게 순서대로 단시간 할당하는 시스템

### 프로세스 관리
- 프로세스의 상태에는 대기상태, 실행 가능 상태, 실행 상태가 있다.
- 대기 상태: 입출력 동작을 기다리고 있는 상태
- 실행 상태 : 프로세스에 CPU의 사용권한이 할당되어 실행되고 있는 상태
- 실행 가능 상태 : CPU의 사용권할 할당을 기다리고 있는 상태
- 디스패치 : OS가 가장 우선수위가 높은 '실행 가능 상태'의 프로세스에 대해 CPU 사용권한을 할당하는 것
- 프리엠션 : 인터럽트에 의해 CPU 할당을 해제하는 것

### 멀티태스킹의 종류
- 프리엠티브 : OS가 실행 가능 상태인 태스크에게 CPU의 사용권한을 할당하고 강제적으로 태스크를 괸리하는 것
- 논프리엠티브 : 실행 중인 태스크가 처리를 수행하지 않는 시간을 자발적으로 해제함으로써 다른 태스크와 동시에 실핼할 수 있도록 하는 것
- 논프리엠티브의 경우 CPU를 해제하지 않는 태스크가 있으면 OS 전체의 동작이 정지될 수 있다.

### 프로세스 제어
- 프로그램 상태어 (PSW : Program Status Word) : 인터럽트로 인해 중단된 프로그램의 상태나 연산의 종료 상태를 저장해 두는 '레지스터' (CPU안에 있음)
- 프로세스 제어 블럭 (PCB : Process Control Block) : 각 프로세스의 CPU 상태(컨텍스트)나 프로세스의 상태를 저장해 두는 '메모리 영역'
- 컨텍스트 스위치 : 인터럽트로 인해 프로세스를 전환할 때 OS가 컨텍스트를 PCB에 저장하고 복원하는 것

### 스케줄링
- OS가 여러 개의 프로세스를 처리할 때 CPU를 할당할 순서를 정하는 것
- 라운드 로빈 방식
- 우선순위 방식


