# 메모리 관리
메모리 영역을 관리한다. 프로세스 관리는 CPU 코어를 고려했지만, 메모리 관리에서는 물리 메모리 공간의 최대치를 고려한다. 프로세스가 이용하는 독립 메모리 공간을 확보하거나 
상호 간의 참조 영역을 지키기 위해 독립성을 관리한다.

### 메모리 역할
- 메인 메모리는 실행하는 프로그램이 로드되는 장소일 뿐만 아니라 프로그램의 작업 장소로도 사용된다.
- 하드디스크와 같은 보조 기억 장치는 많은 정보를 저장할 수 있지만 읽고 쓰는 처리가 메모리에 비해 매우 느리므로 메모리로 읽어들이는 것이 효율적이다.
- 또한 속도가 느린 하드디스크에 대한 액세스를 극도로 줄이기 위해 하드디스크를 자주 참조하는 프로그램이나 데이터를 미리 읽어들이기 위한 메모리가 있는데, 이를 캐시 메모리라고 한다.

#### ROM과 RAM
- RAM (Random Access Memory) : 정보 기록이 가능
- 일반적으로 말하는 메모리는 RAM을 말한다. RAM은 메인메모리 (주기억 장치)라고도 한다.
- RAM은 컴퓨터의 전원을 끄면 기억한 내용이 사라져 버리는 휘발성 메모리이다.
- ROM (Read Only Memory) : 원칙적으로 읽기만 가능
- ROM은 컴퓨터의 전원을 꺼도 내용이 사라지지 않는 비휘발성 메모리이다.

### 메모리의 주소

- 메모리에는 주소가 붙어있다.
- 주소를 지정하면 해당 주소에 저장되어 있는 데이터나 명령을 호출하거나 변경할 수 있다.


### 메모리의 종류
#### RAM (Random Access Memory)
- 데이터의 읽기, 쓰기가 가능하지만 컴퓨터의 전원을 끄면 기록한 내용이 사라지는 휘발성 메모리

##### DRAM(Dynamic RAM)
- 메인 메모리나 VRAM(Video RAM 화면표시용 메모리)로 사용된다.
- 리프레시 동작 (정보를 보존 및 유지하기 위해 기억 내용을 다시 쓰는 것)이 필요함
- 소비 전력이 낮음
- 대용량임
- 처리가 비교적 느림

##### SRAM(Static RAM)
- 캐시 메모리로 사용된다.
- FilpFlop회로 (리프레시가 불필요한 회로) 구조
- 소비 전력이 큼
- 저용량임
- 처리 속도가 빠름

#### ROM (Read Only Memory)
- ROM은 기동 시 시스템 체크나 BIOS 정보 등을 저장하는데 사용된다. 주로 기록 내용을 읽어들이는 용도로 사용되지만 쓰기가 가능한 것도 있다.

### 메모리 공간
- 메모리 공간은 주소라 불리는 번지를 붙여서 각 영역을 식별한다.

#### 메인 메모리의 용도
- CPU가 계산을 할 때 데이터를 기억해 두기 위해 메인 메모리에는 많은 데이터를 기억 할 수 있도록 되어있다.

#### 힙
- 힙은 파일로부터 읽어들인 데이터나 네트워크 상에서 수신한 데이터를 저장할 때와 같이 필요한 만큼만 확보하여 사용하는 메모리 영역
- 필요가 없어지면 해제한다.

#### 스택
- 스택은 프로그램 실행 중에 이용하는 변수의 내용을 일시적으로 저장하는 메모리 영역이다.
- 스택은 프로그램 한 단위가 시작될 때 자동적으로 확보되고 처리가 종료되면 자동으로 해제된다.
- 사용할수 있는 스택 영역의 용량은 정해져 있으므로 너무 많이 사용하면 오버플로가 발생.

### 가상 기억
- 메인 메모리보다 큰 기억 영역을 제공하는 장치

#### 물리 메모리
- 컴퓨터에 실제로 장착되어 있는 메모리를 '물리 메모리' 라고한다.
- OS가 다룰 수 있는 메모리의 용량은 정해져 있는데, 물리 메모리가 그 최대 용량을 모두 갖고 있다고 말할 수는 없다.

#### 가상 메모리
- 최근 OS는 하드디스크 안에 페이징 파일 (스왑 파일) 이라는 파일을 작성한다.
- **이 파일과 물리 메모리를 합쳐서** 가상의 메모리 영역으로 간주함으로써 물리 메모리의 용량을 초과한 메모리를 다룰 수 있다.

#### 스왑
- 메모리 용량이 부족할 때 물리 메모리와 페이징 파일 사이에서 메모리상의 프로세스를 일시적으로 교환하는 것
- 스왑은 하드디스크에 자주 액세스하므로 퍼포먼스 저하로 이어진다.

### 메모리 확보와 해제
- 얼로케이션(allocation) 할당 : OS가 프로세스나 데이터의 메모리 영역을 확보하는 것
- 확보한 메모리 영역은 처리 종료시 해제해야 한다.
- 리로케이션(relocation) 재배치 : 한 번 확보한 메모리 영역의 위치를 변경하는 것
- 다이내믹 리로케이션(Dynamic Relocation) : 실행 중인 프로그램의 위치를 변경하는 것

#### 가비지 콜렉션
- 힙 영역이 가득 차서 액세스할 수 없을 때는 불필요한 메모리 영역을 자동으로 해제하는데, 이를 가비지 콜렉션이라고 한다.

#### 컴팩션 (Compaction : 조각모음)
- 단편화된 메모리의 미사용 영역을 모아서 연속으로 이용할 수 있는 메모리 영역을 만드는 것.


### 매핑
- OS가 물리 메모리와 가상 메모리 사이에서 프로그램이나 데이터를 대응시키는 것

#### 페이징
- 고정 길이 페이지 단위로 매핑을 수행하는 것
- 스래싱(Thrashing) : 페이징이 빈번히 일어나는 것 -> CPU의 이용 효율저하의 원인이됨

#### 세그멘테이션
- 가변 길이 세그먼트 단위로 매핑을 수행하는 것
- 세그먼트에는 프로세스에서 사용하는 메모리를 연속해서 할당
- 세그멘티이션을 빈번히 수행하면 프레그먼테이션이 발생하므로 컴팩션을 수행할 필요가 있다.
